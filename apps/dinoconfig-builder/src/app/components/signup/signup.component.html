<dc-auth-layout
  title="Create Account"
  description="Join DinoConfig and start managing your configurations"
  sidebarTitle="Start Your Journey"
  sidebarDescription="Join thousands of developers managing configurations with DinoConfig."
  maxWidth="500px"
  padding="p-6 md:p-8"
  [showOverflow]="true"
>
  @if (error()) {
    <div class="error-message">
      {{ error() }}
    </div>
  }

  <form [formGroup]="signupForm" (ngSubmit)="onSubmit()" class="auth-form">
    <div class="form-row">
      <div class="form-group">
        <label class="form-label">First Name</label>
        <input
          type="text"
          formControlName="firstName"
          placeholder="Enter your first name"
          class="form-input"
          [class.error]="getFieldError('firstName') && signupForm.get('firstName')?.touched"
          autocomplete="given-name"
        />
        @if (getFieldError('firstName') && signupForm.get('firstName')?.touched) {
          <span class="error-text">{{ getFieldError('firstName') }}</span>
        }
      </div>

      <div class="form-group">
        <label class="form-label">Last Name</label>
        <input
          type="text"
          formControlName="lastName"
          placeholder="Enter your last name"
          class="form-input"
          [class.error]="getFieldError('lastName') && signupForm.get('lastName')?.touched"
          autocomplete="family-name"
        />
        @if (getFieldError('lastName') && signupForm.get('lastName')?.touched) {
          <span class="error-text">{{ getFieldError('lastName') }}</span>
        }
      </div>
    </div>

    <div class="form-group">
      <label class="form-label">Company</label>
      <input
        type="text"
        formControlName="company"
        placeholder="Enter your company name"
        class="form-input"
        [class.error]="getFieldError('company') && signupForm.get('company')?.touched"
        autocomplete="organization"
      />
      @if (getFieldError('company') && signupForm.get('company')?.touched) {
        <span class="error-text">{{ getFieldError('company') }}</span>
      }
    </div>

    <div class="form-group">
      <label class="form-label">Email</label>
      <input
        type="email"
        formControlName="email"
        placeholder="Enter your email address"
        class="form-input"
        [class.error]="getFieldError('email') && signupForm.get('email')?.touched"
        autocomplete="email"
      />
      @if (getFieldError('email') && signupForm.get('email')?.touched) {
        <span class="error-text">{{ getFieldError('email') }}</span>
      }
    </div>

    <div class="form-group">
      <label class="form-label">Password</label>
      <div class="password-input-wrapper">
        <input
          [type]="showPassword() ? 'text' : 'password'"
          formControlName="password"
          placeholder="Create a strong password"
          class="form-input"
          [class.error]="getFieldError('password') && signupForm.get('password')?.touched"
          autocomplete="new-password"
        />
        <button
          type="button"
          class="password-toggle"
          (click)="togglePasswordVisibility()"
          [attr.aria-label]="showPassword() ? 'Hide password' : 'Show password'"
        >
          @if (showPassword()) {
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
              <line x1="1" y1="1" x2="23" y2="23"/>
            </svg>
          } @else {
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          }
        </button>
      </div>
      @if (getFieldError('password') && signupForm.get('password')?.touched) {
        <span class="error-text">{{ getFieldError('password') }}</span>
      }
    </div>

    <div class="form-group">
      <label class="form-label">Confirm Password</label>
      <div class="password-input-wrapper">
        <input
          [type]="showConfirmPassword() ? 'text' : 'password'"
          formControlName="confirmPassword"
          placeholder="Confirm your password"
          class="form-input"
          [class.error]="(getPasswordMismatchError() || getFieldError('confirmPassword')) && signupForm.get('confirmPassword')?.touched"
          autocomplete="new-password"
        />
        <button
          type="button"
          class="password-toggle"
          (click)="toggleConfirmPasswordVisibility()"
          [attr.aria-label]="showConfirmPassword() ? 'Hide password' : 'Show password'"
        >
          @if (showConfirmPassword()) {
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/>
              <line x1="1" y1="1" x2="23" y2="23"/>
            </svg>
          } @else {
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          }
        </button>
      </div>
      @if (getPasswordMismatchError() && signupForm.get('confirmPassword')?.touched) {
        <span class="error-text">{{ getPasswordMismatchError() }}</span>
      }
      @if (getFieldError('confirmPassword') && signupForm.get('confirmPassword')?.touched) {
        <span class="error-text">{{ getFieldError('confirmPassword') }}</span>
      }
    </div>

    <div class="checkbox-group">
      <label class="checkbox-label">
        <input
          type="checkbox"
          formControlName="agreeToTerms"
          class="checkbox-input"
        />
        <span class="checkbox-text">
          I agree to the
          <a href="#" class="checkbox-link">Terms of Service</a>
          and
          <a href="#" class="checkbox-link">Privacy Policy</a>
        </span>
      </label>
      @if (getFieldError('agreeToTerms') && signupForm.get('agreeToTerms')?.touched) {
        <span class="error-text">{{ getFieldError('agreeToTerms') }}</span>
      }
    </div>

    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="isLoading() || signupForm.invalid"
    >
      @if (isLoading()) {
        <span class="spinner"></span>
        <span>Creating account...</span>
      } @else {
        Create Account
      }
    </button>
  </form>

  <div class="auth-footer">
    <p>
      Already have an account?
      <a routerLink="/signin" class="auth-link">Sign in</a>
    </p>
  </div>
</dc-auth-layout>
